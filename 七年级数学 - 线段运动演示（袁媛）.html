<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>线段运动问题 - CD 在 AB 上动态运动（AC + DB 为定值）</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        .container {
            width: 95%;
            max-width: 1300px;
            margin: 40px auto;
            text-align: center;
            padding: 0 20px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px; /* 缩小标题与作者间距，排版更紧凑 */
            font-size: 24px;
            font-weight: 600;
        }
        /* 新增作者样式（第二行，居中显示，适配整体排版） */
        .author {
            color: #666;
            font-size: 18px;
            margin-bottom: 20px; /* 作者与下方观察提示间距 */
            font-weight: 500;
        }
        .motion-note {
            color: #555;
            font-size: 18px;
            margin-bottom: 30px;
            font-weight: 500;
        }
        .motion-note span {
            color: #e74c3c;
            font-weight: bold;
        }
        .slider-container {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .slider {
            flex: 1;
            height: 8px;
            appearance: none;
            background-color: #f1f1f1;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
        }
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background-color: #e74c3c;
            border: 2px solid #fff;
            box-shadow: 0 0 0 1px #e74c3c;
            transition: all 0.2s ease;
        }
        .slider::-webkit-slider-thumb:hover {
            background-color: #c0392b;
            transform: scale(1.2);
        }
        .slider-label {
            font-size: 18px;
            color: #333;
            font-weight: 500;
        }
        .line-container {
            position: relative;
            width: 100%;
            height: 100px;
            margin: 10px 0 50px;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 0 5%;
            overflow: hidden;
        }
        .line {
            position: absolute;
            height: 3px;
            border-radius: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        .line-ab {
            width: calc(90% - 2px);
            left: calc(5% + 1px);
            background-color: #333;
            z-index: 1;
            box-shadow: none;
        }
        .line-cd {
            background-color: #e74c3c;
            z-index: 3;
            transition: left 0.02s linear;
        }
        .point {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background-color: #2c3e50;
            z-index: 5;
            border: 2px solid #fff;
            box-shadow: 0 0 0 1px #2c3e50;
        }
        .point-c { left: 0; top: 50%; }
        .point-d { right: 0; top: 50%; }
        .point-a { left: 5%; }
        .point-b { right: 5%; }
        .label {
            position: absolute;
            font-size: 18px;
            color: #333;
            font-weight: 500;
        }
        .label-a { left: calc(5% - 15px); top: 75%; }
        .label-b { right: calc(5% - 15px); top: 75%; }
        .label-c { left: -12px; top: -25px; }
        .label-d { right: -12px; top: 85%; }
        .length-display {
            margin: 20px 0;
            font-size: 19px;
            color: #333;
            line-height: 2;
            text-align: center;
        }
        .length-display span {
            font-weight: bold;
            font-size: 21px;
            padding: 0 3px;
        }
        .ac-span { color: #e74c3c; }
        .db-span { color: #2ecc71; }
        .sum-span { color: #f39c12; }
        .ac-display { display: block; }
        .btn {
            padding: 11px 22px;
            margin: 0 12px 20px;
            border: none;
            border-radius: 6px;
            background-color: #3498db;
            color: white;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        .btn-ac { background-color: #e74c3c; }
        .btn-ac:hover { background-color: #c0392b; }
        .fixed-note {
            margin-top: 10px;
            font-size: 18px;
            color: #666;
            line-height: 1.6;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        @media (max-width: 768px) {
            .line-cd { width: 120px; }
            .length-display { font-size: 17px; }
            .btn { padding: 9px 18px; font-size: 16px; }
            h1 { font-size: 22px; }
            .author { font-size: 16px; } /* 小屏幕适配作者字号 */
            .slider-container { gap: 10px; }
            .slider-label { font-size: 16px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 第一行：标题 -->
        <h1>七年级数学 - 线段运动演示（动态版）</h1>
        <!-- 第二行：新增作者（核心修改，居中显示） -->
        <div class="author">作者：袁媛</div>
        <!-- 原有内容不变 -->
        <div class="motion-note">
            📌 观察重点：<span>拖动滑动条控制 CD 在线段 AB 上运动</span>，CD=8cm（固定），AB=18cm（固定），AC+DB 始终为定值
        </div>
        
        <div class="line-container">
            <div class="line line-ab"></div>
            <div class="line line-cd" id="cd">
                <div class="point point-c" id="c"></div>
                <div class="point point-d" id="d"></div>
                <div class="label label-c" id="labelC">C</div>
                <div class="label label-d" id="labelD">D</div>
            </div>
            <div class="point point-a"></div>
            <div class="point point-b"></div>
            <div class="label label-a">A</div>
            <div class="label label-b">B</div>
        </div>
        
        <div class="slider-container">
            <span class="slider-label">手动控制 CD：</span>
            <input type="range" min="0" max="100" value="50" class="slider" id="cdSlider">
            <span class="slider-label">左 ↔ 右</span>
        </div>
        
        <div class="length-display">
            线段AB长度：<span>18</span> cm（固定）<br>
            线段CD长度：<span>8</span> cm（固定）<br>
            <div class="ac-display" id="acDisplay">
                线段AC长度：<span class="ac-span" id="acLength">0</span> cm<br>
            </div>
            线段DB长度：<span class="db-span" id="dbLength">0</span> cm<br>
            <strong>✅ AC + DB = <span class="sum-span" id="acDbSum">10</span> cm（<span class="sum-span">定值</span>）</strong>
        </div>
        
        <div class="fixed-note">
            🔍 逻辑推导：AB = AC + CD + DB → AC + DB = AB - CD = 18 - 8 = 10 cm（CD 任意运动，总和不变）
        </div>
        
        <button class="btn btn-ac" id="toggleAc">隐藏AC长度（互动提问）</button>
        <button class="btn" id="autoMove">停止/重启自动运动</button>
        <button class="btn" id="reset">重置CD+滑动条至中间</button>
    </div>

    <script>
        const AB_TOTAL = 18;
        const CD_TOTAL = 8;
        const FIXED_SUM = AB_TOTAL - CD_TOTAL;
        const lineContainer = document.querySelector('.line-container');
        // 计算AB的实际像素长度（减去5%的左右padding）
        let AB_PX = lineContainer.offsetWidth * 0.9;
        // 基于AB的实际长度计算CD的像素长度
        let CD_PX = (CD_TOTAL / AB_TOTAL) * AB_PX;
        
        const cd = document.getElementById('cd');
        const c = document.getElementById('c');
        const d = document.getElementById('d');
        const acLength = document.getElementById('acLength');
        const dbLength = document.getElementById('dbLength');
        const acDbSum = document.getElementById('acDbSum');
        const toggleAcBtn = document.getElementById('toggleAc');
        const acDisplay = document.getElementById('acDisplay');
        const autoMove = document.getElementById('autoMove');
        const reset = document.getElementById('reset');
        const cdSlider = document.getElementById('cdSlider');
        
        let cdLeft = (AB_PX - CD_PX) / 2;
        let isAutoMoving = false;
        let isAcVisible = true;
        
        function updateLengths() {
            const sliderValue = parseInt(cdSlider.value);
            // 计算CD的left位置，确保不超出AB的范围
            cdLeft = (sliderValue / 100) * (AB_PX - CD_PX);
            // 添加AB的左padding（5%的容器宽度）
            const containerWidth = lineContainer.offsetWidth;
            const abLeftPadding = containerWidth * 0.05;
            cd.style.left = `${abLeftPadding + cdLeft}px`;
            
            const acCm = (cdLeft / AB_PX) * AB_TOTAL;
            const dbCm = FIXED_SUM - acCm;
            
            acLength.textContent = acCm.toFixed(1);
            dbLength.textContent = dbCm.toFixed(1);
            acDbSum.textContent = FIXED_SUM.toFixed(1);
        }
        
        function startAutoMove() {
            let speed = 0.6;
            let sliderValue = parseInt(cdSlider.value);
            
            function animate() {
                sliderValue += speed;
                if (sliderValue >= 100) speed = -0.6;
                if (sliderValue <= 0) speed = 0.6;
                
                cdSlider.value = sliderValue;
                updateLengths();
                
                if (isAutoMoving) requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        cdSlider.addEventListener('input', () => {
            if (isAutoMoving) {
                isAutoMoving = false;
                autoMove.textContent = '重启自动运动';
            }
            updateLengths();
        });
        
        function toggleAutoMove() {
            isAutoMoving = !isAutoMoving;
            if (isAutoMoving) {
                autoMove.textContent = '停止自动运动';
                startAutoMove();
            } else {
                autoMove.textContent = '重启自动运动';
            }
        }
        
        function toggleAcDisplay() {
            isAcVisible = !isAcVisible;
            acDisplay.style.display = isAcVisible ? 'block' : 'none';
            toggleAcBtn.textContent = isAcVisible ? '隐藏AC长度（互动提问）' : '显示AC长度';
        }
        
        function resetCD() {
            isAutoMoving = false;
            cdSlider.value = 50;
            cdLeft = (AB_PX - CD_PX) / 2;
            updateLengths();
            if (!isAcVisible) toggleAcDisplay();
            autoMove.textContent = '重启自动运动';
        }
        
        window.addEventListener('resize', () => {
            // 重新计算AB的实际像素长度（减去5%的左右padding）
            AB_PX = lineContainer.offsetWidth * 0.9;
            // 重新计算CD的像素长度
            CD_PX = (CD_TOTAL / AB_TOTAL) * AB_PX;
            cd.style.width = `${CD_PX}px`;
            updateLengths();
        });
        
        window.addEventListener('load', () => {
            cd.style.width = `${CD_PX}px`;
            // 添加AB的左padding（5%的容器宽度）
            const containerWidth = lineContainer.offsetWidth;
            const abLeftPadding = containerWidth * 0.05;
            cd.style.left = `${abLeftPadding + cdLeft}px`;
            updateLengths(); // 只更新长度，不启动自动运动
        });
        
        toggleAcBtn.addEventListener('click', toggleAcDisplay);
        autoMove.addEventListener('click', toggleAutoMove);
        reset.addEventListener('click', resetCD);
    </script>
</body>
</html>