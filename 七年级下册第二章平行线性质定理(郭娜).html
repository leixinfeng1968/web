<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>平行线性质定理验证 - 初中数学教学专用</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        body {
            background-color: #f5f7fa;
            padding: 20px;
            overflow-x: hidden;
        }
        .container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            background: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            text-align: center;
            color: #2c5282;
            margin-bottom: 10px;
            font-size: 28px;
        }
        .author-title {
            text-align: center;
            color: #4a5568;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .canvas-container {
            width: 98%;
            height: 500px;
            margin: 0 auto 25px;
            border: 2px solid #dee2e6;
            background-color: #ffffff;
            position: relative;
        }
        #mainCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        .controls-wrapper {
            width: 70%;
            margin: 0 auto 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        .control-group {
            min-width: 180px;
            text-align: center;
        }
        label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 14px;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            accent-color: #4299e1;
            border-radius: 3px;
        }
        .val-display {
            color: #2b6cb0;
            font-weight: 600;
            margin-top: 5px;
            font-size: 13px;
        }
        .theorem-box {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-size: 18px;
            line-height: 1.8;
            text-align: center;
            border-left: 4px solid #4299e1;
            width: 95%;
            max-width: 1600px;
        }
        .theorem-box strong {
            color: #e53e3e;
        }
        .angle-table {
            width: 95%;
            max-width: 1600px;
            margin: 0 auto 25px;
            border-collapse: collapse;
            font-size: 17px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .angle-table th {
            background-color: #2c5282;
            color: #ffffff;
            font-weight: bold;
            padding: 16px 20px;
            text-align: center;
            font-size: 18px;
            width: 20%;
        }
        .angle-table td {
            background-color: #ffffff;
            padding: 16px 20px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }
        .angle-table td:nth-child(1) {
            font-weight: 600;
            color: #2c5282;
        }
        .angle-table td span {
            font-weight: bold;
            font-size: 19px;
            color: #2d3748;
        }
        .color-tag {
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 3px;
            margin-right: 6px;
            background-color: #2d3748;
        }
        .conclusion {
            text-align: center;
            font-size: 18px;
            color: #2d3748;
            margin: 20px 0;
            font-weight: 600;
            padding: 12px;
            background-color: #e8f4f8;
            border-radius: 8px;
            width: 95%;
            max-width: 1600px;
        }
        .conclusion span {
            color: #2d3748;
            font-size: 20px;
        }
        .legend {
            width: 80%;
            max-width: 1200px;
            margin: 0 auto 15px;
            display: flex;
            justify-content: center;
            gap: 50px;
            font-size: 16px;
            color: #4a5568;
            flex-wrap: nowrap;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        @media (max-width: 1200px) {
            .canvas-container {
                height: 450px;
            }
            .legend {
                gap: 30px;
            }
        }
        @media (max-width: 768px) {
            .canvas-container {
                height: 380px;
            }
            .controls-wrapper, .legend {
                width: 100%;
                flex-direction: column;
                gap: 15px;
            }
            .control-group, .legend-item {
                width: 80%;
                text-align: center;
                justify-content: center;
            }
            .angle-table {
                width: 100%;
                font-size: 14px;
            }
            .angle-table th, .angle-table td {
                padding: 12px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>平行线性质定理验证</h1>
        <div class="author-title">作者：郭娜</div>
        <div class="canvas-container">
            <canvas id="mainCanvas"></canvas>
        </div>
        <div class="controls-wrapper">
            <div class="control-group">
                <label>截线旋转角度 (5°-175°)</label>
                <input type="range" id="angleSlider" min="5" max="175" step="1" value="40">
                <div class="val-display">当前角度 = <span id="angleVal">40</span>°</div>
            </div>
        </div>
        <div class="theorem-box">
            <strong>平行线性质定理：</strong><br>
            1. 两直线平行，同位角相等；2. 两直线平行，内错角相等；3. 两直线平行，同旁内角互补。
        </div>
        <div class="legend">
            <div class="legend-item"><div class="color-tag"></div>同位角（∠1、∠2）</div>
            <div class="legend-item"><div class="color-tag"></div>内错角（∠1、∠3）</div>
            <div class="legend-item"><div class="color-tag"></div>同旁内角（∠1、∠4）</div>
        </div>
        <table class="angle-table">
            <thead>
                <tr>
                    <th>角的类型</th>
                    <th>对应角标识</th>
                    <th>测量度数</th>
                    <th>性质结论</th>
                    <th>视觉区分</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>同位角</td>
                    <td>∠1 与 ∠2</td>
                    <td><span>∠1=</span><span id="angle1Val">40</span>°、<span>∠2=</span><span id="angle2Val">40</span>°</td>
                    <td>两直线平行，同位角相等</td>
                    <td><div class="color-tag"></div></td>
                </tr>
                <tr>
                    <td>内错角</td>
                    <td>∠1 与 ∠3</td>
                    <td><span>∠1=</span><span id="angle1Val2">40</span>°、<span>∠3=</span><span id="angle3Val">40</span>°</td>
                    <td>两直线平行，内错角相等</td>
                    <td><div class="color-tag"></div></td>
                </tr>
                <tr>
                    <td>同旁内角</td>
                    <td>∠1 与 ∠4</td>
                    <td><span>∠1=</span><span id="angle1Val3">40</span>°、<span>∠4=</span><span id="angle4Val">140</span>°</td>
                    <td>两直线平行，同旁内角互补</td>
                    <td><div class="color-tag"></div></td>
                </tr>
            </tbody>
        </table>
        <div class="conclusion">
            验证结论：<span id="conclusion">两直线平行，同位角、内错角相等，同旁内角互补（∠1=${angle1}°，∠2=${angle2}°，∠3=${angle3}°，∠4=${angle4}°）</span>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('mainCanvas');
        const ctx = canvas.getContext('2d');
        let rotateAngle = 40;
        let canvasW, canvasH;
        let l1Y, l2Y;
        let p1;

        // 页面加载完成后初始化
        window.addEventListener('load', function() {
            initCanvas();
        });

        // 初始化Canvas
        function initCanvas() {
            canvasW = canvas.offsetWidth;
            canvasH = canvas.offsetHeight;
            canvas.width = canvasW;
            canvas.height = canvasH;
            
            // 计算两条平行线的Y坐标
            l1Y = canvasH * 0.3;
            l2Y = canvasH * 0.7;
            
            // 第一个交点的X坐标设置在画布中间
            p1 = {x: canvasW * 0.5, y: l1Y};
            
            // 绘制图形
            drawGraph();
        }

        // 绘制整个图形
        function drawGraph() {
            // 清空画布
            ctx.clearRect(0, 0, canvasW, canvasH);
            
            // 绘制两条水平平行线（蓝色）
            ctx.strokeStyle = '#4299e1';
            ctx.lineWidth = 4;
            
            ctx.beginPath();
            ctx.moveTo(-canvasW, l1Y);
            ctx.lineTo(canvasW * 2, l1Y);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(-canvasW, l2Y);
            ctx.lineTo(canvasW * 2, l2Y);
            ctx.stroke();
            
            // 计算截线参数，确保必相交
            const rad = rotateAngle * Math.PI / 180;
            const tanRad = Math.tan(rad);
            const p2X = p1.x + (l2Y - l1Y) / tanRad;
            const p2 = {x: p2X, y: l2Y};
            
            // 判断P1和P2的位置关系，用于正确计算角度
            const isP1OnRight = p1.x > p2.x;
            
            // 截线延长至画布外（黑色）
            const extLen = canvasW * 2;
            const dirX = Math.cos(rad);
            const dirY = Math.sin(rad);
            const startP = {x: p1.x - extLen * dirX, y: p1.y - extLen * dirY};
            const endP = {x: p1.x + extLen * dirX, y: p1.y + extLen * dirY};
            
            // 绘制截线
            ctx.strokeStyle = '#2d3748';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(startP.x, startP.y);
            ctx.lineTo(endP.x, endP.y);
            ctx.stroke();
            
            // 标记交点（黑色文字）
            ctx.font = 'bold 22px sans-serif';
            ctx.fillStyle = '#2d3748';
            
            // 绘制第一个交点的圆点和标签
            ctx.beginPath();
            ctx.arc(p1.x, p1.y, 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillText('P1', p1.x, p1.y - 20);
            
            // 绘制第二个交点的圆点和标签
            ctx.beginPath();
            ctx.arc(p2.x, p2.y, 6, 0, 2 * Math.PI);
            ctx.fill();
            ctx.fillText('P2', p2.x - 40, p2.y + 30);
            
            // 计算角度值，考虑P1和P2的位置关系
            const angleAbs = rotateAngle % 180;
            let angle1 = angleAbs > 90 ? 180 - angleAbs : angleAbs;
            // 当P1在P2右侧时，显示补角
            if (isP1OnRight) {
                angle1 = 180 - angle1;
            }
            const angle2 = angle1;
            const angle3 = angle1;
            const angle4 = 180 - angle1;
            
            // 绘制角度和实时度数（直接显示 ∠X=XX° 格式）
            function drawAngleWithValue(p, radius, startOffset, endOffset, label, value, xOffset = 0, yOffset = 0) {
                const startRad = rad + startOffset;
                const endRad = rad + endOffset;
                
                // 绘制角弧
                ctx.strokeStyle = '#2d3748';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.arc(p.x, p.y, radius, startRad, endRad);
                ctx.stroke();
                
                // 绘制完整度数标注 ∠X=XX°
                const midRad = (startRad + endRad) / 2;
                const textX = p.x + radius * 1.8 * Math.cos(midRad) + xOffset;
                const textY = p.y + radius * 1.8 * Math.sin(midRad) + yOffset;
                ctx.fillStyle = '#2d3748';
                ctx.font = 'bold 22px sans-serif';
                ctx.fillText(`∠${label}=${value}°`, textX, textY);
            }
            
            // 绘制四个角，直接显示完整度数表达式
            drawAngleWithValue(p1, 30, -rad, 0, '1', angle1, 0, 13);
            drawAngleWithValue(p2, 30, -rad, 0, '2', angle2, 0, 13);
            drawAngleWithValue(p2, 30, Math.PI - rad, Math.PI, '3', angle3, -75);
            drawAngleWithValue(p1, 40, 0, Math.PI - rad, '4', angle4, -30, 10);
            
            // 更新页面数据
            document.getElementById('angleVal').textContent = rotateAngle;
            document.getElementById('angle1Val').textContent = angle1;
            document.getElementById('angle2Val').textContent = angle2;
            document.getElementById('angle1Val2').textContent = angle1;
            document.getElementById('angle3Val').textContent = angle3;
            document.getElementById('angle1Val3').textContent = angle1;
            document.getElementById('angle4Val').textContent = angle4;
            document.getElementById('conclusion').textContent = `两直线平行，同位角、内错角相等，同旁内角互补（∠1=${angle1}°，∠2=${angle2}°，∠3=${angle3}°，∠4=${angle4}°）`;
        }

        // 更新所有数据和图形
        function updateAll() {
            // 获取滑动条的值
            rotateAngle = parseInt(document.getElementById('angleSlider').value);
            // 重新绘制图形
            drawGraph();
        }

        // 滑动条事件监听
        document.getElementById('angleSlider').addEventListener('input', updateAll);
        
        // 窗口大小改变时重新初始化
        window.addEventListener('resize', initCanvas);
    </script>
</body>
</html>