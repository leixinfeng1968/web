<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>点和圆的位置关系</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Arial', sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            min-height: 100vh; 
            background-color: #f5f5f5; 
            padding: 20px;
            overflow-x: hidden;
        }
        .container { 
            text-align: center; 
            background: white; 
            padding: 2vw; 
            border-radius: 15px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            width: 90%; 
            max-width: 800px; 
        }
        h1 { 
            color: #2c3e50; 
            margin-bottom: 2vw; 
            font-size: clamp(24px, 5vw, 28px); 
        }
        .animation-box { 
            margin: 2vw 0; 
            position: relative; 
            width: 100%; 
        }
        svg { 
            width: 100%; 
            height: auto; 
            max-width: 400px; 
            max-height: 400px; 
            border: 1px solid #eee; 
            border-radius: 8px; 
            background-color: #fafafa; 
        }
        .circle { fill: none; stroke: #3498db; stroke-width: 3; }
        .center-point { fill: #2ecc71; }
        .moving-point { fill: #e74c3c; cursor: move; }
        .radius-line { stroke: #9b59b6; stroke-width: 2; stroke-dasharray: 5,5; }
        .distance-line { stroke: #f39c12; stroke-width: 2; }
        .label { font-size: 14px; text-anchor: middle; font-family: 'Arial', sans-serif; }
        .control-panel { 
            width: 100%; 
            max-width: 300px; 
            margin: 2vw auto; 
            background-color: #ecf0f1; 
            padding: 15px; 
            border-radius: 10px; 
        }
        .control-panel h3 { 
            color: #2c3e50; 
            margin-bottom: 10px; 
            font-size: 18px; 
        }
        .status { 
            margin: 10px 0; 
            padding: 10px; 
            border-radius: 5px; 
            background-color: #e3f2fd; 
            color: #263238; 
            font-size: 16px; 
        }
        .formula { 
            background-color: #f8fafc; 
            padding: 15px; 
            border-radius: 10px; 
            margin-top: 2vw; 
            width: 100%; 
        }
        .formula h2 { 
            color: #1976d2; 
            margin-bottom: 10px; 
            font-size: clamp(20px, 4vw, 22px); 
        }
        .formula p { 
            color: #263238; 
            font-size: clamp(16px, 3vw, 18px); 
            line-height: 1.8; 
        }
        .formula strong { color: #e74c3c; }
    </style>
</head>
<body>
    <div class="container">
        <h1>点和圆的位置关系</h1>
        作者  雷新风
        <div class="animation-box">
            <svg id="positionSvg" viewBox="0 0 400 400">
                <!-- 圆 -->
                <circle id="mainCircle" cx="200" cy="200" r="100" class="circle" />
                <!-- 圆心 -->
                <circle cx="200" cy="200" r="6" class="center-point" />
                <text x="200" y="180" class="label" fill="#27ae60">圆心 O</text>
                <!-- 半径 -->
                <line x1="200" y1="200" x2="300" y2="200" class="radius-line" />
                <text x="250" y="190" class="label" fill="#8e44ad">半径 r = 100</text>
                <!-- 可拖动的点 -->
                <circle id="moveablePoint" cx="250" cy="200" r="6" class="moving-point" />
                <text id="pointLabel" x="255" y="190" class="label" fill="#c0392b">点 P</text>
                <!-- 点到圆心的距离线段 -->
                <line id="distanceLine" x1="200" y1="200" x2="250" y2="200" class="distance-line" />
                <text id="distanceLabel" x="225" y="215" class="label" fill="#d35400">距离 d = 50</text>
            </svg>
        </div>
        
        <div class="control-panel">
            <h3>操作说明</h3>
            <p>拖动红色点 P，观察位置变化</p >
            <div class="status" id="positionStatus">
                位置关系：点在圆内（d < r）
            </div>
        </div>
        
        <div class="formula">
            <h2>核心结论</h2>
            <p>设⊙O的半径为 r，点 P 到圆心 O 的距离为 d，则：</p >
            <p>1. <strong>点在圆内</strong> ↔ d < r</p >
            <p>2. <strong>点在圆上</strong> ↔ d = r</p >
            <p>3. <strong>点在圆外</strong> ↔ d > r</p >
        </div>
    </div>

    <script>
        // 获取DOM元素
        const svg = document.getElementById('positionSvg');
        const moveablePoint = document.getElementById('moveablePoint');
        const distanceLine = document.getElementById('distanceLine');
        const distanceLabel = document.getElementById('distanceLabel');
        const pointLabel = document.getElementById('pointLabel');
        const positionStatus = document.getElementById('positionStatus');
        
        // 固定参数
        const centerX = 200;    // 圆心X坐标
        const centerY = 200;    // 圆心Y坐标
        const radius = 100;     // 圆的半径
        let isDragging = false; // 拖动状态
        
        // 计算两点间距离
        function calculateDistance(x1, y1, x2, y2) {
            const dx = x2 - x1;
            const dy = y2 - y1;
            return Math.sqrt(dx * dx + dy * dy);
        }
        
        // 更新点的位置和相关元素
        function updatePointPosition(x, y) {
            // 更新点的坐标
            moveablePoint.setAttribute('cx', x);
            moveablePoint.setAttribute('cy', y);
            // 更新距离线段
            distanceLine.setAttribute('x2', x);
            distanceLine.setAttribute('y2', y);
            // 更新点标签位置
            pointLabel.setAttribute('x', x + 8);
            pointLabel.setAttribute('y', y - 8);
            // 计算距离
            const d = calculateDistance(centerX, centerY, x, y);
            const dRound = Math.round(d);
            // 更新距离标签
            distanceLabel.setAttribute('x', (centerX + x) / 2);
            distanceLabel.setAttribute('y', (centerY + y) / 2 + 15);
            distanceLabel.textContent = `距离 d = ${dRound}`;
            // 判断位置关系
            let statusText = '';
            if (dRound < radius - 1) { // 允许1px误差
                statusText = '位置关系：点在圆内（d < r）';
                positionStatus.style.backgroundColor = '#e3f2fd';
            } else if (dRound > radius + 1) {
                statusText = '位置关系：点在圆外（d > r）';
                positionStatus.style.backgroundColor = '#ffebee';
            } else {
                statusText = '位置关系：点在圆上（d = r）';
                positionStatus.style.backgroundColor = '#e8f5e9';
            }
            positionStatus.textContent = statusText;
        }
        
        // 鼠标/触摸事件监听（拖动功能）
        function startDrag(e) {
            isDragging = true;
            // 阻止默认行为，避免拖动时选中其他元素
            e.preventDefault();
        }
        
        function drag(e) {
            if (!isDragging) return;
            
            // 获取鼠标/触摸在SVG中的坐标
            const rect = svg.getBoundingClientRect();
            let x, y;
            if (e.touches) {
                // 触摸事件
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                // 鼠标事件
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            // 转换为SVG viewBox坐标（保持比例）
            const svgX = (x / rect.width) * 400;
            const svgY = (y / rect.height) * 400;
            
            // 更新位置
            updatePointPosition(svgX, svgY);
        }
        
        function endDrag() {
            isDragging = false;
        }
        
        // 绑定事件
        moveablePoint.addEventListener('mousedown', startDrag);
        moveablePoint.addEventListener('touchstart', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);
        
        // 初始化
        updatePointPosition(250, 200);
    </script>
</body>
</html>