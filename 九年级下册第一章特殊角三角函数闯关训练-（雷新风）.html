<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>特殊角三角函数闯关训练（随机重置版）</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        body {
            max-width: 600px;
            margin: 30px auto;
            padding: 0 20px;
            background-color: #f5fafe;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 8px; /* 缩小标题下方间距 */
            font-size: 20px; /* 标题字号缩小（原24px） */
            font-weight: 600;
        }
        .author {
            text-align: center;
            color: #718096;
            font-size: 16px;
            margin-bottom: 25px; /* 作者信息下方间距 */
        }
        .progress {
            text-align: center;
            font-size: 16px;
            color: #718096;
            margin-bottom: 15px;
        }
        .question {
            font-size: 20px;
            color: #2d3748;
            margin-bottom: 25px;
            text-align: center;
            min-height: 24px;
        }
        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 12px;
            cursor: pointer;
            border: 1px solid #dee2e6;
            transition: background 0.2s;
        }
        .option:hover {
            background: #f0f8fb;
        }
        .option input {
            width: 18px;
            height: 18px;
            accent-color: #4299e1;
            display: block;
        }
        .option label {
            font-size: 16px;
            color: #2d3748;
            cursor: pointer;
            flex: 1;
        }
        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        .btn {
            padding: 10px 25px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .prev-btn {
            background-color: #9f7aea;
            color: white;
        }
        .prev-btn:hover {
            background-color: #805ad5;
        }
        .next-btn {
            background-color: #4299e1;
            color: white;
        }
        .next-btn:hover {
            background-color: #3182ce;
        }
        .submit-btn {
            background-color: #e53e3e;
            color: white;
        }
        .submit-btn:hover {
            background-color: #c53030;
        }
        .reset-btn {
            background-color: #ed8936;
            color: white;
        }
        .reset-btn:hover {
            background-color: #dd6b20;
        }
        .result-container {
            margin-top: 30px;
            padding: 20px;
            background: #faf0f5;
            border-radius: 8px;
            display: none;
        }
        .result-title {
            text-align: center;
            font-size: 22px;
            color: #2d3748;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .stat {
            font-size: 18px;
            color: #4a5568;
            margin-bottom: 10px;
            text-align: center;
        }
        .correct-count {
            color: #48bb78;
            font-weight: 600;
        }
        .wrong-count {
            color: #e53e3e;
            font-weight: 600;
        }
        .time-count {
            color: #4299e1;
            font-weight: 600;
        }
        .answer-key {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        .answer-title {
            font-size: 18px;
            color: #2d3748;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 600;
        }
        .answer-list {
            font-size: 16px;
            color: #4a5568;
            line-height: 1.8;
        }
        .disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>特殊角三角函数闯关训练</h1>
        <div class="author">作者   雷新风</div> <!-- 新增作者信息 -->
        
        <!-- 进度提示 -->
        <div class="progress" id="progress">第1题/共9题</div>
        
        <!-- 题目区域 -->
        <div class="question" id="question">第1题：求 sin30° 的值是？</div>
        
        <!-- 选项区域 -->
        <div id="options-container">
            <div class="option">
                <input type="radio" name="answer" id="opt1" value="1/2">
                <label for="opt1">1/2</label>
            </div>
            <div class="option">
                <input type="radio" name="answer" id="opt2" value="√2/2">
                <label for="opt2">√2/2</label>
            </div>
            <div class="option">
                <input type="radio" name="answer" id="opt3" value="√3/2">
                <label for="opt3">√3/2</label>
            </div>
            <div class="option">
                <input type="radio" name="answer" id="opt4" value="√3/3">
                <label for="opt4">√3/3</label>
            </div>
        </div>
        
        <!-- 按钮区域 -->
        <div class="btn-container">
            <button class="btn prev-btn" id="prev-btn" disabled>上一题</button>
            <button class="btn next-btn" id="next-btn">下一题</button>
            <button class="btn submit-btn" id="submit-btn">交卷</button>
            <button class="btn reset-btn" id="reset-btn">重置</button>
        </div>
        
        <!-- 结果统计区域 -->
        <div class="result-container" id="result-container">
            <div class="result-title">答题结果</div>
            <div class="stat">总题数：9题</div>
            <div class="stat">做对：<span class="correct-count" id="correct-count">0</span>题</div>
            <div class="stat">做错：<span class="wrong-count" id="wrong-count">0</span>题</div>
            <div class="stat">答题时长：<span class="time-count" id="time-count">0</span></div>
            <div class="stat">最终得分：<span class="correct-count" id="final-score">0</span>/9</div>
            
            <div class="answer-key">
                <div class="answer-title">正确答案一览</div>
                <div class="answer-list" id="answer-list"></div>
            </div>
        </div>
    </div>

    <script>
        // 原始题库（9道不重复题目）
        const originalQuestions = [
            {
                title: "求 sin30° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "√3/3"],
                answer: "1/2"
            },
            {
                title: "求 cos45° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "1"],
                answer: "√2/2"
            },
            {
                title: "求 tan60° 的值是？",
                options: ["1", "√3/3", "√3", "√2/2"],
                answer: "√3"
            },
            {
                title: "求 cos30° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "1"],
                answer: "√3/2"
            },
            {
                title: "求 tan45° 的值是？",
                options: ["1", "√3/3", "√3", "√2/2"],
                answer: "1"
            },
            {
                title: "求 sin60° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "1"],
                answer: "√3/2"
            },
            {
                title: "求 tan30° 的值是？",
                options: ["1", "√3/3", "√3", "√2/2"],
                answer: "√3/3"
            },
            {
                title: "求 cos60° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "√3"],
                answer: "1/2"
            },
            {
                title: "求 sin45° 的值是？",
                options: ["1/2", "√2/2", "√3/2", "√3/3"],
                answer: "√2/2"
            }
        ];

        // 洗牌函数（确保随机公平）
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                const temp = newArray[i];
                newArray[i] = newArray[j];
                newArray[j] = temp;
            }
            return newArray;
        }

        // 全局变量
        let randomQuestions = shuffleArray(originalQuestions);
        const total = randomQuestions.length;
        let currentIndex = 0;
        let userAnswers = new Array(total).fill(null);
        let startTime = null; // 记录答题开始时间

        // DOM元素
        const progressEl = document.getElementById("progress");
        const questionEl = document.getElementById("question");
        const optionsContainer = document.getElementById("options-container");
        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        const submitBtn = document.getElementById("submit-btn");
        const resetBtn = document.getElementById("reset-btn");
        const resultContainer = document.getElementById("result-container");
        const correctCountEl = document.getElementById("correct-count");
        const wrongCountEl = document.getElementById("wrong-count");
        const finalScoreEl = document.getElementById("final-score");
        const answerListEl = document.getElementById("answer-list");
        const timeCountEl = document.getElementById("time-count"); // 答题时长元素

        // 初始化
        window.onload = function() {
            startTime = new Date().getTime(); // 页面加载时记录开始时间
            renderQuestion(currentIndex);
            bindEvents();
        };

        // 渲染题目
        function renderQuestion(index) {
            if (index < 0 || index >= total) return;
            const q = randomQuestions[index];
            progressEl.textContent = `第${index+1}题/共${total}题`;
            questionEl.textContent = `第${index+1}题：${q.title}`;
            let optionsHtml = "";
            q.options.forEach((opt, i) => {
                const isChecked = userAnswers[index] === opt;
                optionsHtml += `
                    <div class="option">
                        <input type="radio" name="answer" id="opt${index}-${i}" value="${opt}" ${isChecked ? "checked" : ""}>
                        <label for="opt${index}-${i}">${opt}</label>
                    </div>
                `;
            });
            optionsContainer.innerHTML = optionsHtml;
            prevBtn.disabled = index === 0;
            nextBtn.disabled = index === total - 1;
        }

        // 保存答案
        function saveUserAnswer() {
            const selectedOpt = document.querySelector(`input[name="answer"]:checked`);
            if (selectedOpt) {
                userAnswers[currentIndex] = selectedOpt.value;
            }
        }

        // 上一题
        function prevQuestion() {
            saveUserAnswer();
            currentIndex--;
            renderQuestion(currentIndex);
        }

        // 下一题
        function nextQuestion() {
            saveUserAnswer();
            currentIndex++;
            renderQuestion(currentIndex);
        }

        // 计算答题时长（格式：分:秒）
        function calculateTime() {
            const endTime = new Date().getTime();
            const duration = Math.floor((endTime - startTime) / 1000); // 总秒数
            const minutes = Math.floor(duration / 60);
            const seconds = duration % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 交卷
        function submitPaper() {
            saveUserAnswer();
            let correctCount = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === randomQuestions[index].answer) correctCount++;
            });
            const wrongCount = total - correctCount;
            const timeUsed = calculateTime(); // 获取答题时长
            correctCountEl.textContent = correctCount;
            wrongCountEl.textContent = wrongCount;
            finalScoreEl.textContent = correctCount;
            timeCountEl.textContent = timeUsed; // 显示时长
            let answerListHtml = "";
            randomQuestions.forEach((q, index) => {
                answerListHtml += `第${index+1}题：${q.title} 答案：<span class="correct-count">${q.answer}</span><br>`;
            });
            answerListEl.innerHTML = answerListHtml;
            resultContainer.style.display = "block";
            prevBtn.disabled = true;
            nextBtn.disabled = true;
            submitBtn.disabled = true;
            submitBtn.classList.add("disabled");
        }

        // 重置功能
        function resetGame() {
            randomQuestions = shuffleArray(originalQuestions);
            userAnswers = new Array(total).fill(null);
            currentIndex = 0;
            startTime = new Date().getTime(); // 重置时重新记录开始时间
            resultContainer.style.display = "none";
            submitBtn.disabled = false;
            submitBtn.classList.remove("disabled");
            renderQuestion(currentIndex);
        }

        // 绑定事件
        function bindEvents() {
            prevBtn.onclick = prevQuestion;
            nextBtn.onclick = nextQuestion;
            submitBtn.onclick = submitPaper;
            resetBtn.onclick = resetGame;
        }
    </script>
</body>
</html>