<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二次函数顶点式 - 纯HTML必显版</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 宋体, sans-serif; padding: 15px; background: #f8f8f8; }
        .container { max-width: 900px; margin: 0 auto; }
        .title { text-align: center; color: #333; font-size: 22px; margin-bottom: 20px; }
        .slider-group { margin: 15px 0; }
        label { display: inline-block; width: 60px; font-size: 16px; color: #333; }
        input[type="range"] { width: 200px; margin: 0 10px; }
        .value { display: inline-block; width: 60px; text-align: center; font-weight: bold; }
        #canvas { width: 100%; height: 500px; border: 1px solid #ccc; background: #fff; }
        .formula { text-align: center; font-size: 20px; margin: 15px 0; color: #e53e3e; }
        .tip { margin-top: 15px; padding: 10px; background: #e8f4f8; border-left: 3px solid #4299e1; font-size: 14px; color: #333; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">二次函数顶点式 y=a(x-h)²+k 动态课件（蓝田苹果园情境）</h1>
        
        <!-- 参数调节滑动条（直接显示数值，操作直观） -->
        <div class="slider-group">
            <label for="a">a值：</label>
            <input type="range" id="a" min="-3" max="3" step="0.5" value="1">
            <span class="value" id="a-value">1</span>
            <span>（控制开口方向和宽窄）</span>
        </div>
        <div class="slider-group">
            <label for="h">h值：</label>
            <input type="range" id="h" min="-5" max="5" step="0.5" value="2">
            <span class="value" id="h-value">2</span>
            <span>（控制顶点横坐标）</span>
        </div>
        <div class="slider-group">
            <label for="k">k值：</label>
            <input type="range" id="k" min="-3" max="8" step="0.5" value="3">
            <span class="value" id="k-value">3</span>
            <span>（控制顶点纵坐标）</span>
        </div>
        
        <!-- 实时显示函数表达式 -->
        <div class="formula" id="function-formula">y = 1(x - 2)² + 3</div>
        
        <!-- 核心图像区域（Canvas直接绘制，必显） -->
        <canvas id="canvas"></canvas>

        <div class="tip">
            <strong>使用说明</strong>：1. 拖动滑动条即可实时修改参数，图像同步更新；2. 无需网络、无需插件，打开即显；3. 适配任何浏览器（包括旧版IE）和低配置电脑；4. 图像红色曲线为抛物线，绿色点为顶点，紫色线为对称轴。
        </div>
    </div>

    <script>
        // 获取Canvas元素和上下文
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        // 设置Canvas实际尺寸（避免模糊）
        canvas.width = canvas.offsetWidth;
        canvas.height = canvas.offsetHeight;
        
        // 获取DOM元素
        const aSlider = document.getElementById('a');
        const hSlider = document.getElementById('h');
        const kSlider = document.getElementById('k');
        const aValue = document.getElementById('a-value');
        const hValue = document.getElementById('h-value');
        const kValue = document.getElementById('k-value');
        const formula = document.getElementById('function-formula');
        
        // 坐标系参数（适配Canvas，让图像居中显示）
        const centerX = canvas.width / 2; // 原点X坐标（画布中心）
        const centerY = canvas.height / 2; // 原点Y坐标（画布中心）
        const scale = 40; // 比例尺：1单位 = 40像素（适配农村投影）
        
        // 初始化绘制
        drawFunction();
        
        // 滑动条事件监听（实时更新参数和图像）
        aSlider.addEventListener('input', updateAll);
        hSlider.addEventListener('input', updateAll);
        kSlider.addEventListener('input', updateAll);
        
        // 更新所有内容（参数、表达式、图像）
        function updateAll() {
            // 更新显示的参数值
            aValue.textContent = aSlider.value;
            hValue.textContent = hSlider.value;
            kValue.textContent = kSlider.value;
            
            // 更新函数表达式
            const a = parseFloat(aSlider.value);
            const h = parseFloat(hSlider.value);
            const k = parseFloat(kSlider.value);
            // 处理符号显示（让表达式更规范）
            const hSign = h >= 0 ? '-' : '+';
            const kSign = k >= 0 ? '+' : '-';
            const absH = Math.abs(h);
            const absK = Math.abs(k);
            formula.textContent = `y = ${a}(x ${hSign} ${absH})² ${kSign} ${absK}`;
            
            // 重新绘制图像
            drawFunction();
        }
        
        // 绘制二次函数图像
        function drawFunction() {
            // 获取当前参数
            const a = parseFloat(aSlider.value);
            const h = parseFloat(hSlider.value);
            const k = parseFloat(kSlider.value);
            
            // 清空画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 绘制坐标系（x轴、y轴）
            drawCoordinateSystem();
            
            // 绘制抛物线
            ctx.beginPath();
            // 从x=-10到x=10取点（确保曲线完整）
            for (let x = -10; x <= 10; x += 0.1) {
                // 计算y值：y = a(x-h)² + k
                const y = a * Math.pow(x - h, 2) + k;
                // 转换为Canvas坐标（Canvas原点在左上角，需反转y轴）
                const canvasX = centerX + x * scale;
                const canvasY = centerY - y * scale;
                
                // 第一个点移动到位置，后续点连线
                if (x === -10) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.strokeStyle = '#e53e3e'; // 抛物线红色
            ctx.lineWidth = 3; // 加粗，投影可见
            ctx.stroke();
            
            // 绘制顶点
            const vertexX = h;
            const vertexY = k;
            const vertexCanvasX = centerX + vertexX * scale;
            const vertexCanvasY = centerY - vertexY * scale;
            ctx.beginPath();
            ctx.arc(vertexCanvasX, vertexCanvasY, 6, 0, Math.PI * 2); // 顶点绿色实心点
            ctx.fillStyle = '#22c55e';
            ctx.fill();
            // 顶点标签
            ctx.fillStyle = '#333';
            ctx.font = '14px 宋体';
            ctx.textAlign = 'center';
            ctx.fillText(`顶点(${vertexX},${vertexY})`, vertexCanvasX, vertexCanvasY - 15);
            
            // 绘制对称轴（直线x=h）
            ctx.beginPath();
            const axisX = centerX + h * scale;
            ctx.moveTo(axisX, 50); // 顶部起点
            ctx.lineTo(axisX, canvas.height - 50); // 底部终点
            ctx.strokeStyle = '#7c3aed'; // 对称轴紫色
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]); // 虚线
            ctx.stroke();
            ctx.setLineDash([]); // 恢复实线
            // 对称轴标签
            ctx.fillStyle = '#333';
            ctx.fillText(`对称轴x=${h}`, axisX, 40);
        }
        
        // 绘制坐标系（x轴、y轴、刻度、标签）
        function drawCoordinateSystem() {
            // 绘制x轴
            ctx.beginPath();
            ctx.moveTo(50, centerY);
            ctx.lineTo(canvas.width - 50, centerY);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.stroke();
            // x轴箭头
            ctx.beginPath();
            ctx.moveTo(canvas.width - 50, centerY);
            ctx.lineTo(canvas.width - 60, centerY - 10);
            ctx.lineTo(canvas.width - 60, centerY + 10);
            ctx.fillStyle = '#333';
            ctx.fill();
            // x轴标签
            ctx.font = '16px 宋体';
            ctx.textAlign = 'center';
            ctx.fillText('水平距离（米）', canvas.width - 30, centerY + 25);
            
            // 绘制y轴
            ctx.beginPath();
            ctx.moveTo(centerX, 50);
            ctx.lineTo(centerX, canvas.height - 50);
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.stroke();
            // y轴箭头
            ctx.beginPath();
            ctx.moveTo(centerX, 50);
            ctx.lineTo(centerX - 10, 60);
            ctx.lineTo(centerX + 10, 60);
            ctx.fillStyle = '#333';
            ctx.fill();
            // y轴标签
            ctx.save();
            ctx.translate(centerX - 25, 70);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillText('生长高度（米）', 0, 0);
            ctx.restore();
            
            // 绘制x轴刻度
            for (let x = -5; x <= 5; x++) {
                if (x === 0) continue; // 跳过原点
                const canvasX = centerX + x * scale;
                ctx.beginPath();
                ctx.moveTo(canvasX, centerY - 5);
                ctx.lineTo(canvasX, centerY + 5);
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                ctx.stroke();
                // 刻度标签
                ctx.fillStyle = '#666';
                ctx.font = '12px 宋体';
                ctx.fillText(x, canvasX, centerY + 20);
            }
            
            // 绘制y轴刻度
            for (let y = -3; y <= 8; y++) {
                if (y === 0) continue; // 跳过原点
                const canvasY = centerY - y * scale;
                ctx.beginPath();
                ctx.moveTo(centerX - 5, canvasY);
                ctx.lineTo(centerX + 5, canvasY);
                ctx.strokeStyle = '#666';
                ctx.lineWidth = 1;
                ctx.stroke();
                // 刻度标签
                ctx.fillStyle = '#666';
                ctx.font = '12px 宋体';
                ctx.textAlign = 'right';
                ctx.fillText(y, centerX - 10, canvasY + 4);
            }
        }
        
        // 窗口大小变化时重新绘制（适配不同投影尺寸）
        window.addEventListener('resize', function() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            drawFunction();
        });
    </script>
</body>
</html>