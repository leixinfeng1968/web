<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二元一次方程组与一次函数关系动态演示</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50 min-h-screen p-4 md:p-6">
    <div class="max-w-7xl mx-auto flex flex-col gap-6">
        <!-- 标题区域（含作者信息） -->
        <div class="text-center mb-4">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">二元一次方程组与一次函数关系动态演示</h1>
            <p class="text-gray-500 mt-1 text-lg">作者：陈依群</p>
            <p class="text-gray-600 mt-2">y = k₁x + b₁ 与 y = k₂x + b₂ 的图像交点即为方程组的解</p>
        </div>

        <!-- 主体内容：图表区 → 参数调整区 -->
        <div class="flex flex-col gap-6">
            <!-- 图表区（上方） -->
            <div class="bg-white rounded-lg shadow-md p-5">
                <div class="h-[400px]">
                    <canvas id="function-chart"></canvas>
                </div>
            </div>

            <!-- 函数参数调整区（下方） -->
            <div class="bg-white rounded-lg shadow-md p-5">
                <h2 class="text-xl font-semibold text-gray-700 mb-4">函数参数调整</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- 第一个函数 y = k1x + b1 -->
                    <div>
                        <h3 class="text-lg font-medium text-blue-600 mb-3">函数 1：y = k₁x + b₁</h3>
                        <div class="mb-3">
                            <label class="block text-gray-600 mb-1">k₁ (斜率)：<span id="k1-value" class="font-bold text-blue-600">1</span></label>
                            <input type="range" id="k1" min="-3" max="3" step="0.1" value="1"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="mb-2">
                            <label class="block text-gray-600 mb-1">b₁ (截距)：<span id="b1-value" class="font-bold text-blue-600">0</span></label>
                            <input type="range" id="b1" min="-5" max="5" step="0.1" value="0"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="bg-blue-50 p-2 rounded text-center font-mono text-blue-700">
                            y = <span id="k1-display">1</span>x + <span id="b1-display">0</span>
                        </div>
                    </div>

                    <!-- 第二个函数 y = k2x + b2 -->
                    <div>
                        <h3 class="text-lg font-medium text-red-600 mb-3">函数 2：y = k₂x + b₂</h3>
                        <div class="mb-3">
                            <label class="block text-gray-600 mb-1">k₂ (斜率)：<span id="k2-value" class="font-bold text-red-600">-1</span></label>
                            <input type="range" id="k2" min="-3" max="3" step="0.1" value="-1"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="mb-2">
                            <label class="block text-gray-600 mb-1">b₂ (截距)：<span id="b2-value" class="font-bold text-red-600">2</span></label>
                            <input type="range" id="b2" min="-5" max="5" step="0.1" value="2"
                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                        </div>
                        <div class="bg-red-50 p-2 rounded text-center font-mono text-red-700">
                            y = <span id="k2-display">-1</span>x + <span id="b2-display">2</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 原理说明区域 -->
        <div class="bg-white rounded-lg shadow-md p-5 mt-2">
            <h2 class="text-xl font-semibold text-gray-700 mb-3">核心原理</h2>
            <div class="text-gray-600 space-y-2">
                <p>1. 二元一次方程组的解，对应两个一次函数图像的 <span class="font-bold text-green-600">交点坐标 (x, y)</span>；</p>
                <p>2. 当 k₁ ≠ k₂ 时，两直线相交，方程组有 <span class="font-bold text-green-600">唯一解</span>；</p>
                <p>3. 当 k₁ = k₂ 且 b₁ ≠ b₂ 时，两直线平行，方程组 <span class="font-bold text-red-600">无解</span>；</p>
                <p>4. 当 k₁ = k₂ 且 b₁ = b₂ 时，两直线重合，方程组有 <span class="font-bold text-blue-600">无数组解</span>。</p>
            </div>
        </div>
    </div>

    <script>
        // 初始化图表
        const ctx = document.getElementById('function-chart').getContext('2d');
        let functionChart = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [
                    // 函数1的直线
                    {
                        type: 'line',
                        label: 'y = k₁x + b₁',
                        borderColor: '#2563eb',
                        borderWidth: 3,
                        fill: false,
                        tension: 0,
                        data: [],
                        pointRadius: 0
                    },
                    // 函数2的直线
                    {
                        type: 'line',
                        label: 'y = k₂x + b₂',
                        borderColor: '#dc2626',
                        borderWidth: 3,
                        fill: false,
                        tension: 0,
                        data: [],
                        pointRadius: 0
                    },
                    // 交点（保留交点显示， hover 可查看坐标）
                    {
                        label: '交点 (解)',
                        backgroundColor: '#16a34a',
                        borderColor: '#15803d',
                        borderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8,
                        data: []
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        position: 'center',
                        min: -10,
                        max: 10,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            stepSize: 1
                        }
                    },
                    y: {
                        type: 'linear',
                        position: 'center',
                        min: -10,
                        max: 10,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        },
                        ticks: {
                            stepSize: 1
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        enabled: true,
                        callbacks: {
                            label: function(context) {
                                if (context.datasetIndex === 2) {
                                    return `解：(x=${context.parsed.x.toFixed(2)}, y=${context.parsed.y.toFixed(2)})`;
                                }
                                return context.dataset.label;
                            }
                        }
                    }
                }
            }
        });

        // 获取DOM元素
        const k1Slider = document.getElementById('k1');
        const b1Slider = document.getElementById('b1');
        const k2Slider = document.getElementById('k2');
        const b2Slider = document.getElementById('b2');
        const k1Value = document.getElementById('k1-value');
        const b1Value = document.getElementById('b1-value');
        const k2Value = document.getElementById('k2-value');
        const b2Value = document.getElementById('b2-value');
        const k1Display = document.getElementById('k1-display');
        const b1Display = document.getElementById('b1-display');
        const k2Display = document.getElementById('k2-display');
        const b2Display = document.getElementById('b2-display');

        // 更新函数数据和交点
        function updateFunctionData() {
            const k1 = parseFloat(k1Slider.value);
            const b1 = parseFloat(b1Slider.value);
            const k2 = parseFloat(k2Slider.value);
            const b2 = parseFloat(b2Slider.value);

            // 生成函数1和函数2的点（x从-10到10）
            const func1Data = [];
            const func2Data = [];
            for (let x = -10; x <= 10; x += 0.5) {
                func1Data.push({ x, y: k1 * x + b1 });
                func2Data.push({ x, y: k2 * x + b2 });
            }

            // 计算交点（仅当两直线不平行时）
            let intersection = [];
            if (Math.abs(k1 - k2) > 0.001) { // k1 ≠ k2，有唯一交点
                const x = (b2 - b1) / (k1 - k2);
                const y = k1 * x + b1;
                intersection = [{ x: parseFloat(x.toFixed(2)), y: parseFloat(y.toFixed(2)) }];
            }

            // 更新图表数据
            functionChart.data.datasets[0].data = func1Data;
            functionChart.data.datasets[1].data = func2Data;
            functionChart.data.datasets[2].data = intersection;
            functionChart.update();

            // 更新显示值
            k1Value.textContent = k1;
            b1Value.textContent = b1;
            k2Value.textContent = k2;
            b2Value.textContent = b2;
            k1Display.textContent = k1;
            b1Display.textContent = b1;
            k2Display.textContent = k2;
            b2Display.textContent = b2;
        }

        // 绑定参数调整事件
        k1Slider.addEventListener('input', updateFunctionData);
        b1Slider.addEventListener('input', updateFunctionData);
        k2Slider.addEventListener('input', updateFunctionData);
        b2Slider.addEventListener('input', updateFunctionData);

        // 初始化
        updateFunctionData();
    </script>
</body>
</html>

